{"remainingRequest":"/home/zhijian/fourth/javaweb/rent-system/rent-vue-2.0/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/zhijian/fourth/javaweb/rent-system/rent-vue-2.0/src/views/list-housing/components/AreaSelector.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/zhijian/fourth/javaweb/rent-system/rent-vue-2.0/src/views/list-housing/components/AreaSelector.vue","mtime":1591349233740},{"path":"/home/zhijian/fourth/javaweb/rent-system/rent-vue-2.0/node_modules/cache-loader/dist/cjs.js","mtime":1590898200625},{"path":"/home/zhijian/fourth/javaweb/rent-system/rent-vue-2.0/node_modules/babel-loader/lib/index.js","mtime":1590898200625},{"path":"/home/zhijian/fourth/javaweb/rent-system/rent-vue-2.0/node_modules/cache-loader/dist/cjs.js","mtime":1590898200625},{"path":"/home/zhijian/fourth/javaweb/rent-system/rent-vue-2.0/node_modules/vue-loader/lib/index.js","mtime":1590898200561}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n  name: 'AreaSelector',\n  data() {\n    return {\n      provinceList: [], // 省列表\n      cityList: [], // 市列表\n      originList: [], // 区列表\n      valueProvince: '', // 所选的省\n      valueCity: '', // 所选的市\n      valueOrigin: '', // 所选的区\n      cityOptions: [], // 市下拉框数据\n      originOptions: [] // 区下拉框数据\n    }\n  },\n  computed: {\n    selectedArea() {\n      // const provinceIndex = this.provinceList.findIndex(function({ value, label }) {\n      //   value === this.valueProvince\n      // })\n      const provinceIndex = this.provinceList.findIndex(({ value, label }) => value === this.valueProvince)\n      const cityIndex = this.cityList.findIndex(({ value, label }) => value === this.valueCity)\n      const originIndex = this.originList.findIndex(({ value, label }) => value === this.valueOrigin)\n      return this.provinceList[provinceIndex].label + ' ' + this.cityList[cityIndex].label + ' ' + this.originList[originIndex].label\n    }\n  },\n  methods: {\n    // 选择省\n    changeProvince(val) {\n      this.provinceList.forEach((province, index) => {\n        if (val.toString() === this.provinceList[index].value) {\n          this.cityOptions = this.provinceList[index].children\n          this.valueCity = this.provinceList[index].children[0].value\n          this.originOptions = this.provinceList[index].children[0].children\n          this.valueOrigin = this.provinceList[index].children[0].children[0].value\n        }\n      })\n    },\n    // 选择市\n    changeCity(val) {\n      this.cityList.forEach((city, index) => {\n        if (val.toString() === this.cityList[index].value) {\n          this.originOptions = this.cityList[index].children\n          this.valueOrigin = this.cityList[index].children[0].value\n        }\n      })\n    },\n    // 选择区\n    changeOrigin(val) {\n      this.valueOrigin = val\n    },\n    _getJsonData() {\n      this.getRequest('@/../public/china_address_v4.json').then((res) => {\n        if (!res) console.log('error')\n        this.provinceList = []\n        this.cityList = []\n        this.originList = []\n        res.data.forEach((item) => {\n          if (item.value.match(/0000$/)) {\n            this.provinceList.push({\n              value: item.value,\n              label: item.name,\n              children: []\n            })\n          } else if (item.value.match(/00$/)) {\n            this.cityList.push({\n              value: item.value,\n              label: item.name,\n              children: []\n            })\n          } else {\n            this.originList.push({\n              value: item.value,\n              label: item.name\n            })\n          }\n        })\n        for (let index in this.provinceList) {\n          for (let index1 in this.cityList) {\n            if (this.provinceList[index].value.slice(0, 2) === this.cityList[index1].value.slice(0, 2)) {\n              this.provinceList[index].children.push(this.cityList[index1])\n            }\n          }\n        }\n        for (let item1 in this.cityList) {\n          for (let item2 in this.originList) {\n            if (this.originList[item2].value.slice(0, 4) === this.cityList[item1].value.slice(0, 4)) {\n              this.cityList[item1].children.push(this.originList[item2])\n            }\n          }\n        }\n      })\n    }\n  },\n  created() {\n    this._getJsonData()\n  }\n}\n",{"version":3,"sources":["AreaSelector.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAmBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AreaSelector.vue","sourceRoot":"src/views/list-housing/components","sourcesContent":["<template>\n  <div>\n    <el-select v-model=\"valueProvince\" placeholder=\"请选择省\" @change=\"changeProvince\">\n      <el-option v-for=\"item in provinceList\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\">\n      </el-option>\n    </el-select>\n    <el-select v-model=\"valueCity\" placeholder=\"请选择市\" @change=\"changeCity\">\n      <el-option v-for=\"item in cityOptions\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\">\n      </el-option>\n    </el-select>\n    <el-select v-model=\"valueOrigin\" placeholder=\"请选择区\" @change=\"changeOrigin\">\n      <el-option v-for=\"item in originOptions\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\">\n      </el-option>\n    </el-select>\n    <el-button type=\"primary\" size=\"mini\" @click=\"$emit('select-area', selectedArea)\">确认</el-button>\n  </div>\n</template>\n\n<script>\n  export default {\n    name: 'AreaSelector',\n    data() {\n      return {\n        provinceList: [], // 省列表\n        cityList: [], // 市列表\n        originList: [], // 区列表\n        valueProvince: '', // 所选的省\n        valueCity: '', // 所选的市\n        valueOrigin: '', // 所选的区\n        cityOptions: [], // 市下拉框数据\n        originOptions: [] // 区下拉框数据\n      }\n    },\n    computed: {\n      selectedArea() {\n        // const provinceIndex = this.provinceList.findIndex(function({ value, label }) {\n        //   value === this.valueProvince\n        // })\n        const provinceIndex = this.provinceList.findIndex(({ value, label }) => value === this.valueProvince)\n        const cityIndex = this.cityList.findIndex(({ value, label }) => value === this.valueCity)\n        const originIndex = this.originList.findIndex(({ value, label }) => value === this.valueOrigin)\n        return this.provinceList[provinceIndex].label + ' ' + this.cityList[cityIndex].label + ' ' + this.originList[originIndex].label\n      }\n    },\n    methods: {\n      // 选择省\n      changeProvince(val) {\n        this.provinceList.forEach((province, index) => {\n          if (val.toString() === this.provinceList[index].value) {\n            this.cityOptions = this.provinceList[index].children\n            this.valueCity = this.provinceList[index].children[0].value\n            this.originOptions = this.provinceList[index].children[0].children\n            this.valueOrigin = this.provinceList[index].children[0].children[0].value\n          }\n        })\n      },\n      // 选择市\n      changeCity(val) {\n        this.cityList.forEach((city, index) => {\n          if (val.toString() === this.cityList[index].value) {\n            this.originOptions = this.cityList[index].children\n            this.valueOrigin = this.cityList[index].children[0].value\n          }\n        })\n      },\n      // 选择区\n      changeOrigin(val) {\n        this.valueOrigin = val\n      },\n      _getJsonData() {\n        this.getRequest('@/../public/china_address_v4.json').then((res) => {\n          if (!res) console.log('error')\n          this.provinceList = []\n          this.cityList = []\n          this.originList = []\n          res.data.forEach((item) => {\n            if (item.value.match(/0000$/)) {\n              this.provinceList.push({\n                value: item.value,\n                label: item.name,\n                children: []\n              })\n            } else if (item.value.match(/00$/)) {\n              this.cityList.push({\n                value: item.value,\n                label: item.name,\n                children: []\n              })\n            } else {\n              this.originList.push({\n                value: item.value,\n                label: item.name\n              })\n            }\n          })\n          for (let index in this.provinceList) {\n            for (let index1 in this.cityList) {\n              if (this.provinceList[index].value.slice(0, 2) === this.cityList[index1].value.slice(0, 2)) {\n                this.provinceList[index].children.push(this.cityList[index1])\n              }\n            }\n          }\n          for (let item1 in this.cityList) {\n            for (let item2 in this.originList) {\n              if (this.originList[item2].value.slice(0, 4) === this.cityList[item1].value.slice(0, 4)) {\n                this.cityList[item1].children.push(this.originList[item2])\n              }\n            }\n          }\n        })\n      }\n    },\n    created() {\n      this._getJsonData()\n    }\n  }\n</script>"]}]}