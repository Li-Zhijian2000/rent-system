{"remainingRequest":"/home/zhijian/fourth/javaweb/rent-system/rent-vue-4.0/node_modules/babel-loader/lib/index.js!/home/zhijian/fourth/javaweb/rent-system/rent-vue-4.0/src/router.js","dependencies":[{"path":"/home/zhijian/fourth/javaweb/rent-system/rent-vue-4.0/src/router.js","mtime":1591895976206},{"path":"/home/zhijian/fourth/javaweb/rent-system/rent-vue-4.0/node_modules/cache-loader/dist/cjs.js","mtime":1591895249737},{"path":"/home/zhijian/fourth/javaweb/rent-system/rent-vue-4.0/node_modules/babel-loader/lib/index.js","mtime":1591895249725}],"contextDependencies":[],"result":["import Vue from 'vue';\nimport Router from 'vue-router';\nimport { addDynamicRoutes } from '@/utils/router';\nimport { menu } from '@/config/menu-config';\nVue.use(Router);\nvar routes = [{\n  path: '/login',\n  component: function component() {\n    return import('@/views/login');\n  }\n}, {\n  path: '/home',\n  component: function component() {\n    return import('@/views/layout/Layout');\n  },\n  children: [{\n    path: '',\n    component: function component() {\n      return import('@/views/Home');\n    }\n  }]\n}];\nvar router = new Router({\n  routes: routes\n});\nrouter.beforeEach(function (to, from, next) {\n  var username = sessionStorage.getItem('username');\n  var role = sessionStorage.getItem('role');\n\n  if (menu.length != 0) {\n    next();\n    return;\n  }\n\n  if (to.path === '/login') {\n    if (username) {\n      next({\n        path: '/home'\n      });\n    } else {\n      next();\n    }\n  } else {\n    if (username) {\n      addDynamicRoutes(role);\n      console.log('@/router/'); // fresh = true\n\n      next(to);\n    } else {\n      next({\n        path: '/login'\n      });\n    }\n  }\n});\nexport default router;",{"version":3,"sources":["/home/zhijian/fourth/javaweb/rent-system/rent-vue-4.0/src/router.js"],"names":["Vue","Router","addDynamicRoutes","menu","use","routes","path","component","children","router","beforeEach","to","from","next","username","sessionStorage","getItem","role","length","console","log"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,MAAP,MAAmB,YAAnB;AACA,SAASC,gBAAT,QAAiC,gBAAjC;AACA,SAASC,IAAT,QAAqB,sBAArB;AAEAH,GAAG,CAACI,GAAJ,CAAQH,MAAR;AAEA,IAAMI,MAAM,GAAG,CACb;AACEC,EAAAA,IAAI,EAAE,QADR;AAEEC,EAAAA,SAAS,EAAE;AAAA,WAAM,OAAO,eAAP,CAAN;AAAA;AAFb,CADa,EAKb;AACED,EAAAA,IAAI,EAAE,OADR;AAEEC,EAAAA,SAAS,EAAE;AAAA,WAAM,OAAO,uBAAP,CAAN;AAAA,GAFb;AAGEC,EAAAA,QAAQ,EAAE,CAAC;AACTF,IAAAA,IAAI,EAAE,EADG;AAETC,IAAAA,SAAS,EAAE;AAAA,aAAM,OAAO,cAAP,CAAN;AAAA;AAFF,GAAD;AAHZ,CALa,CAAf;AAeA,IAAME,MAAM,GAAG,IAAIR,MAAJ,CAAW;AAACI,EAAAA,MAAM,EAANA;AAAD,CAAX,CAAf;AAEAI,MAAM,CAACC,UAAP,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AACpC,MAAIC,QAAQ,GAAGC,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAAf;AACA,MAAIC,IAAI,GAAGF,cAAc,CAACC,OAAf,CAAuB,MAAvB,CAAX;;AACA,MAAIb,IAAI,CAACe,MAAL,IAAe,CAAnB,EAAsB;AACpBL,IAAAA,IAAI;AACJ;AACD;;AACD,MAAIF,EAAE,CAACL,IAAH,KAAY,QAAhB,EAA0B;AACxB,QAAIQ,QAAJ,EAAc;AACZD,MAAAA,IAAI,CAAE;AAAEP,QAAAA,IAAI,EAAE;AAAR,OAAF,CAAJ;AACD,KAFD,MAEO;AACLO,MAAAA,IAAI;AACL;AACF,GAND,MAMO;AACL,QAAIC,QAAJ,EAAc;AACZZ,MAAAA,gBAAgB,CAACe,IAAD,CAAhB;AACAE,MAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAFY,CAGZ;;AACAP,MAAAA,IAAI,CAACF,EAAD,CAAJ;AAED,KAND,MAMO;AACLE,MAAAA,IAAI,CAAC;AAAEP,QAAAA,IAAI,EAAE;AAAR,OAAD,CAAJ;AACD;AACF;AACF,CAxBD;AAyBA,eAAeG,MAAf","sourcesContent":["import Vue from 'vue'\nimport Router from 'vue-router'\nimport { addDynamicRoutes } from '@/utils/router'\nimport { menu } from '@/config/menu-config'\n\nVue.use(Router)\n\nconst routes = [\n  {\n    path: '/login',\n    component: () => import('@/views/login')\n  },\n  {\n    path: '/home',\n    component: () => import('@/views/layout/Layout'),\n    children: [{\n      path: '',\n      component: () => import('@/views/Home')\n    }]\n  }\n]\n\nconst router = new Router({routes})\n\nrouter.beforeEach((to, from, next) => {\n  let username = sessionStorage.getItem('username')\n  let role = sessionStorage.getItem('role')\n  if (menu.length != 0) {\n    next()\n    return\n  }\n  if (to.path === '/login') {\n    if (username) {\n      next( { path: '/home' })\n    } else {\n      next()\n    } \n  } else {\n    if (username) {\n      addDynamicRoutes(role)\n      console.log('@/router/')\n      // fresh = true\n      next(to)\n  \n    } else {\n      next({ path: '/login' })\n    }\n  }\n})\nexport default router\n\n"]}]}