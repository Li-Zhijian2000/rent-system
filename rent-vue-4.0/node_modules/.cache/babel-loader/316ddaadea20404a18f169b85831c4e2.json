{"remainingRequest":"/home/zhijian/fourth/javaweb/rent-system/rent-vue-4.0/node_modules/babel-loader/lib/index.js!/home/zhijian/fourth/javaweb/rent-system/rent-vue-4.0/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/zhijian/fourth/javaweb/rent-system/rent-vue-4.0/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/zhijian/fourth/javaweb/rent-system/rent-vue-4.0/src/views/layout/components/TopNav.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/zhijian/fourth/javaweb/rent-system/rent-vue-4.0/src/views/layout/components/TopNav.vue","mtime":1591958326781},{"path":"/home/zhijian/fourth/javaweb/rent-system/rent-vue-4.0/node_modules/cache-loader/dist/cjs.js","mtime":1591895249737},{"path":"/home/zhijian/fourth/javaweb/rent-system/rent-vue-4.0/node_modules/babel-loader/lib/index.js","mtime":1591895249725},{"path":"/home/zhijian/fourth/javaweb/rent-system/rent-vue-4.0/node_modules/cache-loader/dist/cjs.js","mtime":1591895249737},{"path":"/home/zhijian/fourth/javaweb/rent-system/rent-vue-4.0/node_modules/vue-loader/lib/index.js","mtime":1591895249413}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport debug from 'debug';\nimport { mapState } from 'vuex';\nvar log = debug('v3:TopNav');\nexport default {\n  name: 'TopNav',\n  data: function data() {\n    return {// tags: []\n    };\n  },\n  watch: {\n    '$route': function $route(to, from) {\n      console.log(to, from);\n      log('to', to);\n      log('from', from);\n      this.addCachedView(to);\n    }\n  },\n  computed: {\n    tags: function tags() {\n      return this.$store.state.navTags.map(function (item) {\n        return {\n          index: item.index,\n          title: item.title,\n          tabType: item.active ? 'success' : 'info',\n          active: item.active\n        };\n      });\n    }\n  },\n  methods: {\n    addCachedView: function addCachedView(view) {\n      if (view.meta.type === 'menu') {\n        this.$store.dispatch('addNavTags', view);\n      }\n    },\n    closeTag: function closeTag(index) {\n      var tagId = this.tags[index].index; // 关闭处于激活状态的tag, 此时要切换路由\n\n      if (this.tags[index].active) {\n        if (this.tags[index + 1]) {\n          this.activeTag(this.tags[index + 1].index);\n        } else if (this.tags[index - 1]) {\n          this.activeTag(this.tags[index - 1].index);\n        } else {\n          this.$router.push(\"/Home\");\n        }\n      }\n\n      this.$store.dispatch('removeOneNavTag', {\n        index: tagId\n      }); // }\n      // log('dispatch removeOneNavTag done')\n      // let nextTag = this.navTags.length === 0 ? '/' : this.navTags[this.navTags.length - 1]\n      // this.activeTag(nextTag)\n    },\n    activeTag: function activeTag(tag) {\n      console.log(tag);\n      this.$router.push(tag);\n    }\n  },\n  mounted: function mounted() {\n    this.addCachedView(this.$route);\n  }\n};",{"version":3,"sources":["TopNav.vue"],"names":[],"mappings":";;;;;;;;;;AAWA,OAAA,KAAA,MAAA,OAAA;AACA,SAAA,QAAA,QAAA,MAAA;AAEA,IAAA,GAAA,GAAA,KAAA,CAAA,WAAA,CAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,QADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA,CACA;AADA,KAAA;AAGA,GANA;AAOA,EAAA,KAAA,EAAA;AACA,YADA,kBACA,EADA,EACA,IADA,EACA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,EAAA,EAAA,IAAA;AACA,MAAA,GAAA,CAAA,IAAA,EAAA,EAAA,CAAA;AACA,MAAA,GAAA,CAAA,MAAA,EAAA,IAAA,CAAA;AAEA,WAAA,aAAA,CAAA,EAAA;AACA;AAPA,GAPA;AAgBA,EAAA,QAAA,EAAA;AACA,IAAA,IADA,kBACA;AACA,aAAA,KAAA,MAAA,CAAA,KAAA,CAAA,OAAA,CAAA,GAAA,CAAA,UAAA,IAAA,EAAA;AACA,eAAA;AACA,UAAA,KAAA,EAAA,IAAA,CAAA,KADA;AAEA,UAAA,KAAA,EAAA,IAAA,CAAA,KAFA;AAGA,UAAA,OAAA,EAAA,IAAA,CAAA,MAAA,GAAA,SAAA,GAAA,MAHA;AAIA,UAAA,MAAA,EAAA,IAAA,CAAA;AAJA,SAAA;AAMA,OAPA,CAAA;AAQA;AAVA,GAhBA;AA4BA,EAAA,OAAA,EAAA;AACA,IAAA,aADA,yBACA,IADA,EACA;AACA,UAAA,IAAA,CAAA,IAAA,CAAA,IAAA,KAAA,MAAA,EAAA;AACA,aAAA,MAAA,CAAA,QAAA,CAAA,YAAA,EAAA,IAAA;AACA;AACA,KALA;AAMA,IAAA,QANA,oBAMA,KANA,EAMA;AACA,UAAA,KAAA,GAAA,KAAA,IAAA,CAAA,KAAA,EAAA,KAAA,CADA,CAEA;;AACA,UAAA,KAAA,IAAA,CAAA,KAAA,EAAA,MAAA,EAAA;AACA,YAAA,KAAA,IAAA,CAAA,KAAA,GAAA,CAAA,CAAA,EAAA;AACA,eAAA,SAAA,CAAA,KAAA,IAAA,CAAA,KAAA,GAAA,CAAA,EAAA,KAAA;AACA,SAFA,MAEA,IAAA,KAAA,IAAA,CAAA,KAAA,GAAA,CAAA,CAAA,EAAA;AACA,eAAA,SAAA,CAAA,KAAA,IAAA,CAAA,KAAA,GAAA,CAAA,EAAA,KAAA;AACA,SAFA,MAEA;AACA,eAAA,OAAA,CAAA,IAAA;AACA;AACA;;AAEA,WAAA,MAAA,CAAA,QAAA,CAAA,iBAAA,EAAA;AACA,QAAA,KAAA,EAAA;AADA,OAAA,EAbA,CAgBA;AACA;AACA;AACA;AACA,KA1BA;AA2BA,IAAA,SA3BA,qBA2BA,GA3BA,EA2BA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA,GAAA;AACA;AA9BA,GA5BA;AA4DA,EAAA,OA5DA,qBA4DA;AACA,SAAA,aAAA,CAAA,KAAA,MAAA;AACA;AA9DA,CAAA","sourcesContent":["<template>\n  <div>\n    <el-tag class=\"v3-tag\" v-for=\"(tag, index) in tags\" :key=\"tag.index\" closable \n    @close=\"closeTag(index)\" :type=\"tag.tabType\"\n    @click=\"activeTag(tag.index)\">\n      {{tag.title}}\n    </el-tag>\n  </div>\n</template>\n\n<script>\n  import debug from 'debug'\n  import { mapState } from 'vuex'\n\n  const log = debug('v3:TopNav')\n\n  export default {\n    name: 'TopNav',\n    data() {\n      return {\n        // tags: []\n      }\n    },\n    watch: {\n      '$route' (to, from) {\n        console.log(to, from)\n        log('to', to)\n        log('from', from)\n\n        this.addCachedView(to)\n      }\n    },\n    computed: {\n      tags () {\n        return this.$store.state.navTags.map((item) => {\n          return {\n            index: item.index,\n            title: item.title,\n            tabType: item.active ? 'success' : 'info',\n            active: item.active\n          }\n        })\n      }\n    },\n    methods: {\n      addCachedView (view) {\n        if (view.meta.type === 'menu') {\n          this.$store.dispatch('addNavTags', view)\n        }\n      },\n      closeTag (index) {\n        let tagId = this.tags[index].index\n        // 关闭处于激活状态的tag, 此时要切换路由\n        if (this.tags[index].active) {\n          if (this.tags[index + 1]) {\n            this.activeTag(this.tags[index + 1].index)\n          } else if (this.tags[index - 1]) {\n            this.activeTag(this.tags[index - 1].index)\n          } else {\n            this.$router.push(`/Home`)\n          }\n        } \n        \n        this.$store.dispatch('removeOneNavTag', {\n          index: tagId\n        })\n        // }\n        // log('dispatch removeOneNavTag done')\n        // let nextTag = this.navTags.length === 0 ? '/' : this.navTags[this.navTags.length - 1]\n        // this.activeTag(nextTag)\n      },\n      activeTag (tag) {\n        console.log(tag)\n        this.$router.push(tag)\n      }\n    },\n    mounted () {\n      this.addCachedView(this.$route)\n    }\n  }\n</script>\n\n<style>\n.v3-tag {\n  cursor: pointer;\n  padding-left: 30px;\n}\n</style>\n"],"sourceRoot":"src/views/layout/components"}]}